<p class="center-text">Felix chat app</p>
<div class="middle-text-space">
  <p>Deze pagina beschrijft de uitwerking, implementatie en keuzes van de chat application Felix. Het concept hiervan is te zien op de 
    <a routerLink="/concept_project" routerLinkActive="active">deze</a> pagina. In deze applicatie komen meerdere security aspecten aan bod
    die beschreven staan in mijn <a routerLink="/learningplan" routerLinkActive="active">leerplan</a>. De gedetailleerde uitwerking met gemaakte keuzes, onderbouwing en
    technische details zoals code snippets staan op deze pagina vermeldt. Mijn project staat op <a href="https://git.fhict.nl/I389419/chat-app-felix">Git</a> waar ik ook de code voor dit portfolio heb staan.</p>
  <br>
  <h3><b>1 Systeem design</b></h3>
  <p class="no-bottom-margin">De benodigde applicaties voor het concept zijn:</p>
  <ul>
    <li class="text">De client;</li>
    <li class="text">De server;</li>
    <li class="text">De database.</li>
  </ul>
  <p><b>De client</b> is in Java geschreven en voor de gebruiker die deze op zijn computer kan installeren. De gebruiker moet een licentie hebben om de applicatie te kunnen 
    installeren en activeren.</p>
  <p><b>De server</b> is in Java spring geschreven en is niet voor de gebruiker zelf toegangkelijk. De server wordt gebruikt door de chat client.</p>
  <p><b>De database</b> is een postgress image die opgestart kan worden als een Docker machine die gebruikt wordt door de server.</p>
  <br>
  <h3><b>2 Security</b></h3>
  <p class="no-bottom-margin">De security van de applicatie is opgedeeld onder de volgende onderdelen:</p>
  <ul>
    <li class="text">Encryptie;</li>
    <li class="text">Autorisatie;</li>
    <li class="text">Authenticatie;</li>
    <li class="text">Hashes;</li>
    <li class="text">Licenties;</li>
    <li class="text">Database.</li>
  </ul>
  <p class="no-bottom-margin"><b>2.1 Encryptie</b></p>
  <p>Ik wil in mijn applicatie een mix van RSA en AES gebruiken om de versleuteling van de client naar de server te regelen. RSA is een vrij traag algoritme en is daarom niet 
    geschikt voor het versleutelen van grote berichten, de chats versleutelen met RSA is dan ook geen geschikte optie. AES daarentegen is veel sneller en daarom wel geschikt 
    om grote berichten te versleutelen. Ik ga RSA alleen gebruiken om de sleutel voor de AES encryptie versleuteld te delen tussen de client en server.</p>
  <p class="no-bottom-margin"><b>2.2 Autorisatie</b></p>
  <p class="no-bottom-margin">Voor de authorisatie krijgt de gebruiker na het succesvol inloggen een JWT-token. Hierin kan informatie opgeslagen worden zoals de username, displayname, id en of deze 
    2FA geactiveerd heeft, waarmee de client zich kan identificeren. Deze tokens worden uitgedeeld aan de client's door de server, maar worden ook in server zelf bijghouden 
    met de bijhordende key en websocket sessie.</p>
  <img src="../../../../assets/code/usersession-code.png">
  <p class="image">Afbeelding 1 Usersessie informatie</p>
  <p>Elke sessie heeft een eigen JWT-tokensleutel die bij iedere request van de client ververst wordt, waardoor de JWT-tokensleutel 
  maar een korte tijd in omloop blijft. Als er gerommeld is met deze token dan zal de server deze niet meer kunnen verifiëren en wordt de token ongeldig verklaard met als 
  resultaat dat die ingelogde sessie uit de server wordt verwijderd waardoor de client bij iedere volgende request wordt genereerd. Tevens wordt de client uitgelogd. 
  Mocht een kwaadwillig iemand een andere 'geldige' token kunnen bemachtigen en deze probeerd te gebruiken op een andere inlog, dan komt deze token niet meer overeen met de 
  key van de websocket sessie, en wordt deze ook verwijderd. De JWT-token zelf wordt ook als encrypted AES verkeer verstuurd, dit maakt het onderscheppen van een dergelijke 
  token niet mogelijk.</p>
  <p class="no-bottom-margin">Het genereren en verifiëren van een JWT-token ziet er uit als volgt:</p>
  <img src="../../../../assets/code/JWT-token-code.png">
  <p class="image">Afbeelding 2 JWT-token code</p>










  <p class="no-bottom-margin"><b>2.3 Authenticatie</b></p>
  <p>Not implemented yet</p>
  <p class="no-bottom-margin"><b>2.4 Hashes</b></p>
  <p>Not implemented yet</p>
  <p class="no-bottom-margin"><b>2.5 Licenties</b></p>
  <p>Not implemented yet</p>






  <p class="no-bottom-margin"><b>2.6 Database</b></p>
  <p>Voor de database gebruik ik een postgress database die vanuit een Docker image op te starten is. Dit is handig omdat als ik mijn applicatie wil uitleveren voor het 
    red team vs blue team event, zij dit makkelijk zelf kunnen opzetten. Er zal qua communicatie richting de database geen specefieke security nodig zijn omdat dit in een live 
    omgeving achter een Kubernetes cluster draait. Ik heb geen mogelijkheid om een Kubernetes cluster ergens op te zetten omdat dat enorm veel server capaciteit nodig heeft 
    en dit kost naar onderzoek vorig semester erg veel geld. Dit zal in de scope van dit project bij de server draaien <span style="font-size: 11px;">[1]</span>. Mocht 
    hier een andere oplossing voor zijn dan kan dit nog veranderen.</p>


  <p><span style="font-size: 11px;">[1] Ik nog onderzoek doen of hier iets in te regelen valt binnen Seclab.</span></p>
  <br>
  <br>
  <br>
</div>